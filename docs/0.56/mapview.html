<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>MapView · React Native 中文网</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="官方建议使用[react-native-maps](https://github.com/airbnb/react-native-maps)代替此地图组件。"/><meta name="docsearch:version" content="0.56"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="MapView · React Native 中文网"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reactnativecn.github.io/react-native-website/"/><meta property="og:description" content="官方建议使用[react-native-maps](https://github.com/airbnb/react-native-maps)代替此地图组件。"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/react-native-website/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/highlight.js@9.18.1/styles/solarized-dark.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-63485149-4', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/focus-visible@5.0.2/dist/focus-visible.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/reactnativecn/react-native-website@production/cnwebsite/static/js/codeblocks.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/reactnativecn/react-native-website@production/cnwebsite/static/js/tabs.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/reactnativecn/react-native-website@production/cnwebsite/static/js/doccode.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="https://cdn.jsdelivr.net/gh/facebook/docusaurus@1.14.4/packages/docusaurus-1.x/lib/static/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-native-website/css/main.css"/><script src="https://cdn.jsdelivr.net/gh/facebook/docusaurus@1.14.4/packages/docusaurus-1.x/lib/static/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-native-website/"><img class="logo" src="/react-native-website/img/header_logo.svg" alt="React Native 中文网"/><h2 class="headerTitleWithLogo">React Native 中文网</h2></a><a href="/react-native-website/versions"><h3>0.56</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/react-native-website/docs/0.56/getting-started" target="_self">文档</a></li><li class=""><a href="/react-native-website/docs/0.56/activityindicator" target="_self">API</a></li><li class=""><a href="//github.com/reactnativecn/react-native-website/issues" target="_blank">讨论</a></li><li class=""><a href="//update.reactnative.cn" target="_blank">热更新</a></li><li class=""><a href="/react-native-website/about" target="_self">关于</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/react-native" target="_self">GitHub</a></li><li class=""><a href="//zh-hans.reactjs.org/" target="_blank">React</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="//github.com/reactnativecn/react-native-website/blob/production/cndocs/mapview.md" target="_blank" rel="noreferrer noopener">帮助改进此文档</a><h1 id="__docusaurus" class="postHeaderTitle">MapView</h1></header><article><div><span><p>官方建议使用<a href="https://github.com/airbnb/react-native-maps">react-native-maps</a>代替此地图组件。</p>
<h3><a class="anchor" aria-hidden="true" id="截图"></a><a href="#截图" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>截图</h3>
<p><img src="/img/components/mapview.png" alt=""></p>
<h3><a class="anchor" aria-hidden="true" id="属性"></a><a href="#属性" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>属性</h3>
<div class="props">
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="view"></a><a href="view.html#props">View props...</a> <a class="hash-link" href="#view">#</a></h4>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="annotations"></a><span class="platform">ios</span>annotations <span class="propType">[{latitude: number, longitude: number, animateDrop: bool, title: string, subtitle: string, hasLeftCallout: bool, hasRightCallout: bool, onLeftCalloutPress: function, onRightCalloutPress: function, id: string}]</span> <a class="hash-link" href="#annotations">#</a></h4>
        <div>
            <p>地图上的标注点，可以带有标题及副标题。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="legallabelinsets"></a><span class="platform">ios</span>legalLabelInsets <span class="propType">{top: number, left: number, bottom: number, right: number}</span> <a class="hash-link" href="#legallabelinsets">#</a></h4>
        <div>
            <p>地图上标签的合法范围。默认在地图底部左侧。参见<code>EdgeInsetsPropType.js</code>了解更多信息。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="maptype"></a><span class="platform">ios</span>mapType <span class="propType">enum('standard', 'satellite', 'hybrid')</span> <a class="hash-link" href="#maptype">#</a></h4>
        <div>
            <p>要显示的地图类型。</p>
            <ul>
                <li>standard: 标准道路地图（默认）。</li>
                <li>satellite: 卫星视图。</li>
                <li>hybrid: 卫星视图并附带道路和感兴趣的点标记。</li>
            </ul>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="maxdelta"></a><span class="platform">ios</span>maxDelta <span class="propType">number</span> <a class="hash-link" href="#maxdelta">#</a></h4>
        <div>
            <p>可以被显示的最大区域尺寸。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="mindelta"></a><span class="platform">ios</span>minDelta <span class="propType">number</span> <a class="hash-link" href="#mindelta">#</a></h4>
        <div>
            <p>可以被显示的最小区域尺寸。</p>
        </div>
    </div>
    <div class="prop">
    <h4 class="propTitle"><a class="anchor" name="overlays"></a><span class="platform">ios</span>overlays <span class="propType">[{coordinates: [{latitude: number, longitude: number}], lineWidth: number, strokeColor: ColorPropType, fillColor: ColorPropType, id: string}]</span> <a class="hash-link" href="#overlays">#</a></h4>
    <div><p>地图的覆盖层。</p></div></div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="onannotationpress"></a>onAnnotationPress <span class="propType">function</span> <a class="hash-link" href="#onannotationpress">#</a></h4>
        <div>
            <p>当用户点击地图上的标注之后会调用此回调函数一次。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="onregionchange"></a>onRegionChange <span class="propType">function</span> <a class="hash-link" href="#onregionchange">#</a></h4>
        <div>
            <p>在用户拖拽地图的时候持续调用此回调函数。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="onregionchangecomplete"></a>onRegionChangeComplete <span class="propType">function</span> <a class="hash-link" href="#onregionchangecomplete">#</a></h4>
        <div>
            <p>当用户停止拖拽地图之后，调用此回调函数一次。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="pitchenabled"></a>pitchEnabled <span class="propType">bool</span> <a class="hash-link" href="#pitchenabled">#</a></h4>
        <div>
            <p>当此属性设为<code>true</code>并且地图上关联了一个有效的镜头时，镜头的抬起角度会使地图平面倾斜。当此属性设为<code>false</code>，镜头的抬起角度会忽略，地图永远都显示为俯视角度。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="region"></a>region <span class="propType">{latitude: number, longitude: number, latitudeDelta: number, longitudeDelta: number}</span> <a class="hash-link" href="#region">#</a></h4>
        <div>
            <p>地图显示的区域。</p>
            <p>区域使用中心的坐标和要显示的范围来定义。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="rotateenabled"></a>rotateEnabled <span class="propType">bool</span> <a class="hash-link" href="#rotateenabled">#</a></h4>
        <div>
            <p>当此属性设为<code>true</code>并且地图上关联了一个有效的镜头时，镜头的朝向角度会用于基于中心点旋转地图平面。当此属性设置为<code>false</code>时，朝向角度会被忽略，并且地图永远都显示为顶部方向为正北方。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="scrollenabled"></a>scrollEnabled <span class="propType">bool</span> <a class="hash-link" href="#scrollenabled">#</a></h4>
        <div>
            <p>如果此属性设为<code>false</code>，用户不能改变地图所显示的区域。默认值为<code>true</code>。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="showsuserlocation"></a>showsUserLocation <span class="propType">bool</span> <a class="hash-link" href="#showsuserlocation">#</a></h4>
        <div>
            <p>如果此属性为<code>true</code>，应用会请求用户当前的位置并且聚焦到该位置。默认值是<code>false</code>。</p>
            <p><strong>注意</strong>：你需要在Info.plist中增加NSLocationWhenInUseUsageDescription字段。否则它会没有<em>任何提示而直接失败</em>！</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="style"></a>style <span class="propType"><a href="view.html#style">View#style</a></span> <a class="hash-link" href="#style">#</a></h4>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="zoomenabled"></a>zoomEnabled <span class="propType">bool</span> <a class="hash-link" href="#zoomenabled">#</a></h4>
        <div>
            <p>如果此属性为<code>false</code>，用户则不能旋转/缩放地图。默认值为<code>true</code>。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="active"></a><span class="platform">android</span>active <span class="propType">bool</span> <a class="hash-link" href="#active">#</a></h4>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="showscompass"></a><span class="platform">ios</span>showsCompass <span class="propType">bool</span> <a class="hash-link" href="#showscompass">#</a></h4>
        <div>
            <p>如果此属性为<code>false</code>，地图上不会显示指南针。默认值为<code>true</code>。</p>
        </div>
    </div>
    <div class="prop">
        <h4 class="propTitle"><a class="anchor" name="showspointsofinterest"></a><span class="platform">ios</span>showsPointsOfInterest <span class="propType">bool</span> <a class="hash-link" href="#showspointsofinterest">#</a></h4>
        <div>
            <p>如果此属性为<code>false</code>，感兴趣的点不会在地图上显示。默认为<code>true</code>。</p>
        </div>
    </div>
</div>
<h3><a class="anchor" aria-hidden="true" id="例子"></a><a href="#例子" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>例子</h3>
<pre><code class="hljs css language-jsx"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">var</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">'react'</span>);
<span class="hljs-keyword">var</span> ReactNative = <span class="hljs-built_in">require</span>(<span class="hljs-string">'react-native'</span>);
<span class="hljs-keyword">var</span> { PropTypes } = React;
<span class="hljs-keyword">var</span> {
  Image,
  MapView,
  StyleSheet,
  Text,
  TextInput,
  TouchableOpacity,
  View,
} = ReactNative;

<span class="hljs-keyword">var</span> regionText = {
  <span class="hljs-attr">latitude</span>: <span class="hljs-string">'0'</span>,
  <span class="hljs-attr">longitude</span>: <span class="hljs-string">'0'</span>,
  <span class="hljs-attr">latitudeDelta</span>: <span class="hljs-string">'0'</span>,
  <span class="hljs-attr">longitudeDelta</span>: <span class="hljs-string">'0'</span>,
};

<span class="hljs-keyword">var</span> MapRegionInput = React.createClass({

  <span class="hljs-attr">propTypes</span>: {
    <span class="hljs-attr">region</span>: PropTypes.shape({
      <span class="hljs-attr">latitude</span>: PropTypes.number.isRequired,
      <span class="hljs-attr">longitude</span>: PropTypes.number.isRequired,
      <span class="hljs-attr">latitudeDelta</span>: PropTypes.number,
      <span class="hljs-attr">longitudeDelta</span>: PropTypes.number,
    }),
    <span class="hljs-attr">onChange</span>: PropTypes.func.isRequired,
  },

  getInitialState() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">region</span>: {
        <span class="hljs-attr">latitude</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">longitude</span>: <span class="hljs-number">0</span>,
      }
    };
  },

  <span class="hljs-attr">componentWillReceiveProps</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">nextProps</span>) </span>{
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">region</span>: nextProps.region || <span class="hljs-keyword">this</span>.getInitialState().region
    });
  },

  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> region = <span class="hljs-keyword">this</span>.state.region || <span class="hljs-keyword">this</span>.getInitialState().region;
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.row}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>
            {'Latitude'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{</span>'' + <span class="hljs-attr">region.latitude</span>}
            <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.textInput}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this._onChangeLatitude}</span>
            <span class="hljs-attr">selectTextOnFocus</span>=<span class="hljs-string">{true}</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.row}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>
            {'Longitude'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{</span>'' + <span class="hljs-attr">region.longitude</span>}
            <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.textInput}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this._onChangeLongitude}</span>
            <span class="hljs-attr">selectTextOnFocus</span>=<span class="hljs-string">{true}</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.row}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>
            {'Latitude delta'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{</span>
              <span class="hljs-attr">region.latitudeDelta</span> == <span class="hljs-string">null</span> ? '' <span class="hljs-attr">:</span> <span class="hljs-attr">String</span>(<span class="hljs-attr">region.latitudeDelta</span>)
            }
            <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.textInput}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this._onChangeLatitudeDelta}</span>
            <span class="hljs-attr">selectTextOnFocus</span>=<span class="hljs-string">{true}</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.row}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>
            {'Longitude delta'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span>
            <span class="hljs-attr">value</span>=<span class="hljs-string">{</span>
              <span class="hljs-attr">region.longitudeDelta</span> == <span class="hljs-string">null</span> ? '' <span class="hljs-attr">:</span> <span class="hljs-attr">String</span>(<span class="hljs-attr">region.longitudeDelta</span>)
            }
            <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.textInput}</span>
            <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this._onChangeLongitudeDelta}</span>
            <span class="hljs-attr">selectTextOnFocus</span>=<span class="hljs-string">{true}</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.changeButton}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{this._change}</span>&gt;</span>
            {'Change'}
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
    );
  },

  <span class="hljs-attr">_onChangeLatitude</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    regionText.latitude = e.nativeEvent.text;
  },

  <span class="hljs-attr">_onChangeLongitude</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    regionText.longitude = e.nativeEvent.text;
  },

  <span class="hljs-attr">_onChangeLatitudeDelta</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    regionText.latitudeDelta = e.nativeEvent.text;
  },

  <span class="hljs-attr">_onChangeLongitudeDelta</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    regionText.longitudeDelta = e.nativeEvent.text;
  },

  <span class="hljs-attr">_change</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">region</span>: {
        <span class="hljs-attr">latitude</span>: <span class="hljs-built_in">parseFloat</span>(regionText.latitude),
        <span class="hljs-attr">longitude</span>: <span class="hljs-built_in">parseFloat</span>(regionText.longitude),
        <span class="hljs-attr">latitudeDelta</span>: <span class="hljs-built_in">parseFloat</span>(regionText.latitudeDelta),
        <span class="hljs-attr">longitudeDelta</span>: <span class="hljs-built_in">parseFloat</span>(regionText.longitudeDelta),
      },
    });
    <span class="hljs-keyword">this</span>.props.onChange(<span class="hljs-keyword">this</span>.state.region);
  },

});

<span class="hljs-keyword">var</span> MapViewExample = React.createClass({

  getInitialState() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isFirstLoad</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">mapRegion</span>: <span class="hljs-literal">undefined</span>,
      <span class="hljs-attr">mapRegionInput</span>: <span class="hljs-literal">undefined</span>,
      <span class="hljs-attr">annotations</span>: [],
    };
  },

  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">MapView</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span>
          <span class="hljs-attr">onRegionChange</span>=<span class="hljs-string">{this._onRegionChange}</span>
          <span class="hljs-attr">onRegionChangeComplete</span>=<span class="hljs-string">{this._onRegionChangeComplete}</span>
          <span class="hljs-attr">region</span>=<span class="hljs-string">{this.state.mapRegion}</span>
          <span class="hljs-attr">annotations</span>=<span class="hljs-string">{this.state.annotations}</span>
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">MapRegionInput</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{this._onRegionInputChanged}</span>
          <span class="hljs-attr">region</span>=<span class="hljs-string">{this.state.mapRegionInput}</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
    );
  },

  _getAnnotations(region) {
    <span class="hljs-keyword">return</span> [{
      <span class="hljs-attr">longitude</span>: region.longitude,
      <span class="hljs-attr">latitude</span>: region.latitude,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'You Are Here'</span>,
    }];
  },

  _onRegionChange(region) {
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">mapRegionInput</span>: region,
    });
  },

  _onRegionChangeComplete(region) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isFirstLoad) {
      <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">mapRegionInput</span>: region,
        <span class="hljs-attr">annotations</span>: <span class="hljs-keyword">this</span>._getAnnotations(region),
        <span class="hljs-attr">isFirstLoad</span>: <span class="hljs-literal">false</span>,
      });
    }
  },

  _onRegionInputChanged(region) {
    <span class="hljs-keyword">this</span>.setState({
      <span class="hljs-attr">mapRegion</span>: region,
      <span class="hljs-attr">mapRegionInput</span>: region,
      <span class="hljs-attr">annotations</span>: <span class="hljs-keyword">this</span>._getAnnotations(region),
    });
  },

});

<span class="hljs-keyword">var</span> AnnotationExample = React.createClass({

  getInitialState() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isFirstLoad</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">annotations</span>: [],
      <span class="hljs-attr">mapRegion</span>: <span class="hljs-literal">undefined</span>,
    };
  },

  render() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isFirstLoad) {
      <span class="hljs-keyword">var</span> onRegionChangeComplete = <span class="hljs-function">(<span class="hljs-params">region</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.setState({
          <span class="hljs-attr">isFirstLoad</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">annotations</span>: [{
            <span class="hljs-attr">longitude</span>: region.longitude,
            <span class="hljs-attr">latitude</span>: region.latitude,
            ...this.props.annotation,
          }],
        });
      };
    }

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MapView</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span>
        <span class="hljs-attr">onRegionChangeComplete</span>=<span class="hljs-string">{onRegionChangeComplete}</span>
        <span class="hljs-attr">region</span>=<span class="hljs-string">{this.state.mapRegion}</span>
        <span class="hljs-attr">annotations</span>=<span class="hljs-string">{this.state.annotations}</span>
      /&gt;</span></span>
    );
  },

});

<span class="hljs-keyword">var</span> DraggableAnnotationExample = React.createClass({

  createAnnotation(longitude, latitude) {
    <span class="hljs-keyword">return</span> {
      longitude,
      latitude,
      <span class="hljs-attr">draggable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">onDragStateChange</span>: <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (event.state === <span class="hljs-string">'idle'</span>) {
          <span class="hljs-keyword">this</span>.setState({
            <span class="hljs-attr">annotations</span>: [<span class="hljs-keyword">this</span>.createAnnotation(event.longitude, event.latitude)],
          });
        }
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Drag state: '</span> + event.state);
      },
    };
  },

  getInitialState() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">isFirstLoad</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">annotations</span>: [],
      <span class="hljs-attr">mapRegion</span>: <span class="hljs-literal">undefined</span>,
    };
  },

  render() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.isFirstLoad) {
      <span class="hljs-keyword">var</span> onRegionChangeComplete = <span class="hljs-function">(<span class="hljs-params">region</span>) =&gt;</span> {
        <span class="hljs-comment">//When the MapView loads for the first time, we can create the annotation at the</span>
        <span class="hljs-comment">//region that was loaded.</span>
        <span class="hljs-keyword">this</span>.setState({
          <span class="hljs-attr">isFirstLoad</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">annotations</span>: [<span class="hljs-keyword">this</span>.createAnnotation(region.longitude, region.latitude)],
        });
      };
    }

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MapView</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span>
        <span class="hljs-attr">onRegionChangeComplete</span>=<span class="hljs-string">{onRegionChangeComplete}</span>
        <span class="hljs-attr">region</span>=<span class="hljs-string">{this.state.mapRegion}</span>
        <span class="hljs-attr">annotations</span>=<span class="hljs-string">{this.state.annotations}</span>
      /&gt;</span></span>
    );
  },

});

<span class="hljs-keyword">var</span> styles = StyleSheet.create({
  <span class="hljs-attr">map</span>: {
    <span class="hljs-attr">height</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">margin</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'#000000'</span>,
  },
  <span class="hljs-attr">row</span>: {
    <span class="hljs-attr">flexDirection</span>: <span class="hljs-string">'row'</span>,
    <span class="hljs-attr">justifyContent</span>: <span class="hljs-string">'space-between'</span>,
  },
  <span class="hljs-attr">textInput</span>: {
    <span class="hljs-attr">width</span>: <span class="hljs-number">150</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'#aaaaaa'</span>,
    <span class="hljs-attr">fontSize</span>: <span class="hljs-number">13</span>,
    <span class="hljs-attr">padding</span>: <span class="hljs-number">4</span>,
  },
  <span class="hljs-attr">changeButton</span>: {
    <span class="hljs-attr">alignSelf</span>: <span class="hljs-string">'center'</span>,
    <span class="hljs-attr">marginTop</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">padding</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">borderWidth</span>: <span class="hljs-number">0.5</span>,
    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'#777777'</span>,
  },
});

exports.displayName = (<span class="hljs-literal">undefined</span>: ?string);
exports.title = <span class="hljs-string">'&lt;MapView&gt;'</span>;
exports.description = <span class="hljs-string">'Base component to display maps'</span>;
exports.examples = [
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Map'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MapViewExample</span> /&gt;</span></span>;
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'showsUserLocation + followUserLocation'</span>,
    render() {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MapView</span>
          <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span>
          <span class="hljs-attr">showsUserLocation</span>=<span class="hljs-string">{true}</span>
          <span class="hljs-attr">followUserLocation</span>=<span class="hljs-string">{true}</span>
        /&gt;</span></span>
      );
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Callout example'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnnotationExample</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span> <span class="hljs-attr">annotation</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">title:</span> '<span class="hljs-attr">More</span> <span class="hljs-attr">Info...</span>',
        <span class="hljs-attr">rightCalloutView:</span> (
          &lt;<span class="hljs-attr">TouchableOpacity</span>
            <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> {
              alert('You Are Here');
            }}&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
              <span class="hljs-attr">style</span>=<span class="hljs-string">{{width:30,</span> <span class="hljs-attr">height:30</span>}}
              <span class="hljs-attr">source</span>=<span class="hljs-string">{require(</span>'<span class="hljs-attr">.</span>/<span class="hljs-attr">uie_thumb_selected.png</span>')}
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">TouchableOpacity</span>&gt;</span>
        ),
      }}/&gt;</span>;
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Annotation focus example'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnnotationExample</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span> <span class="hljs-attr">annotation</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">title:</span> '<span class="hljs-attr">More</span> <span class="hljs-attr">Info...</span>',
        <span class="hljs-attr">onFocus:</span> () =&gt;</span> {
          alert('Annotation gets focus');
        },
        onBlur: () =&gt; {
          alert('Annotation lost focus');
        }
      }}/&gt;</span>;
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Draggable pin'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DraggableAnnotationExample</span>/&gt;</span></span>;
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Custom pin color'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnnotationExample</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span> <span class="hljs-attr">annotation</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">title:</span> '<span class="hljs-attr">You</span> <span class="hljs-attr">Are</span> <span class="hljs-attr">Purple</span>',
        <span class="hljs-attr">tintColor:</span> <span class="hljs-attr">MapView.PinColors.PURPLE</span>,
      }}/&gt;</span></span>;
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Custom pin image'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnnotationExample</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span> <span class="hljs-attr">annotation</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">title:</span> '<span class="hljs-attr">Thumbs</span> <span class="hljs-attr">Up</span>!',
        <span class="hljs-attr">image:</span> <span class="hljs-attr">require</span>('<span class="hljs-attr">image</span>!<span class="hljs-attr">uie_thumb_big</span>'),
      }}/&gt;</span></span>;
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Custom pin view'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AnnotationExample</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span> <span class="hljs-attr">annotation</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">title:</span> '<span class="hljs-attr">Thumbs</span> <span class="hljs-attr">Up</span>!',
        <span class="hljs-attr">view:</span> &lt;<span class="hljs-attr">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">alignItems:</span> '<span class="hljs-attr">center</span>',
        }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{fontWeight:</span> '<span class="hljs-attr">bold</span>', <span class="hljs-attr">color:</span> '#<span class="hljs-attr">f007</span>'}}&gt;</span>
            Thumbs Up!
          <span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Image</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">{{width:</span> <span class="hljs-attr">90</span>, <span class="hljs-attr">height:</span> <span class="hljs-attr">65</span>, <span class="hljs-attr">resizeMode:</span> '<span class="hljs-attr">cover</span>'}}
            <span class="hljs-attr">source</span>=<span class="hljs-string">{require(</span>'<span class="hljs-attr">image</span>!<span class="hljs-attr">uie_thumb_big</span>')}
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>,
      }}/&gt;</span>;
    }
  },
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'Custom overlay'</span>,
    render() {
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MapView</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.map}</span>
        <span class="hljs-attr">region</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">latitude:</span> <span class="hljs-attr">39.06</span>,
          <span class="hljs-attr">longitude:</span> <span class="hljs-attr">-95.22</span>,
        }}
        <span class="hljs-attr">overlays</span>=<span class="hljs-string">{[{</span>
          <span class="hljs-attr">coordinates:</span>[
            {<span class="hljs-attr">latitude:</span> <span class="hljs-attr">32.47</span>, <span class="hljs-attr">longitude:</span> <span class="hljs-attr">-107.85</span>},
            {<span class="hljs-attr">latitude:</span> <span class="hljs-attr">45.13</span>, <span class="hljs-attr">longitude:</span> <span class="hljs-attr">-94.48</span>},
            {<span class="hljs-attr">latitude:</span> <span class="hljs-attr">39.27</span>, <span class="hljs-attr">longitude:</span> <span class="hljs-attr">-83.25</span>},
            {<span class="hljs-attr">latitude:</span> <span class="hljs-attr">32.47</span>, <span class="hljs-attr">longitude:</span> <span class="hljs-attr">-107.85</span>},
          ],
          <span class="hljs-attr">strokeColor:</span> '#<span class="hljs-attr">f007</span>',
          <span class="hljs-attr">lineWidth:</span> <span class="hljs-attr">3</span>,
        }]}
      /&gt;</span></span>;
    }
  },
];
</code></pre>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="copyright"><p style="color:inherit">React Native中文网 © 2020 杭州欧石南网络科技有限公司</p><p style="color:inherit"><a href="http://beian.miit.gov.cn/">浙ICP备15023664号-3</a><img src="https://img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png" alt="浙公网安备 33010602005511号"/><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602005511">浙公网安备 33010602005511号</a></p></section><script>
        (function(){
          var c = document.createElement("div");
          c.setAttribute("id", "lv-container");
          c.setAttribute("data-id", "city");
          c.setAttribute("data-uid", "MTAyMC8zODM4NS8xNDkxMw==");
          var container = document.querySelector(".mainContainer")
          container && container.appendChild(c);
        })()
        </script><script src="https://cdn-city.livere.com/js/embed.dist.js"></script></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '7ab53ed26928639bae06ef0f6165f68b',
                indexName: 'reactnative_cn',
                inputSelector: '#search_input_react',
                algoliaOptions: {"hitsPerPage":5}
              });
            </script></body></html>